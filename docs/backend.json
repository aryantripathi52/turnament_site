
{
  "entities": {
    "Category": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Category",
      "type": "object",
      "description": "Represents a game category for tournaments.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Category entity."
        },
        "name": {
          "type": "string",
          "description": "The name of the game category."
        },
        "imageUrl": {
          "type": "string",
          "description": "URL for the category's image.",
          "format": "uri"
        }
      },
      "required": ["id", "name", "imageUrl"]
    },
    "Tournament": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Tournament",
      "type": "object",
      "description": "Represents a Free Fire tournament.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Tournament entity."
        },
        "name": {
          "type": "string",
          "description": "Name of the tournament."
        },
        "startDate": {
          "type": "string",
          "description": "Date and time when the tournament starts.",
          "format": "date-time"
        },
        "endDate": {
          "type": "string",
          "description": "Date and time when the tournament ends.",
          "format": "date-time"
        },
        "prizePool": {
          "type": "number",
          "description": "Total prize pool for the tournament."
        },
        "region": {
          "type": "string",
          "description": "Geographic region the tournament is for."
        },
        "description": {
          "type": "string",
          "description": "Detailed description of the tournament."
        },
        "rules": {
          "type": "string",
          "description": "Rules of the tournament."
        },
        "registrationLink": {
          "type": "string",
          "description": "Link to the registration page for the tournament.",
          "format": "uri"
        },
        "contactEmail": {
          "type": "string",
          "description": "Contact email address for the tournament organizer.",
          "format": "email"
        }
      },
      "required": [
        "id",
        "name",
        "startDate",
        "endDate",
        "prizePool",
        "region",
        "description",
        "rules",
        "registrationLink",
        "contactEmail"
      ]
    },
    "Registration": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Registration",
      "type": "object",
      "description": "Represents a team's registration for a tournament.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Registration entity."
        },
        "tournamentId": {
          "type": "string",
          "description": "Reference to Tournament. (Relationship: Tournament 1:N Registration)"
        },
        "teamName": {
          "type": "string",
          "description": "Name of the team registering."
        },
        "contactName": {
          "type": "string",
          "description": "Contact person for the team."
        },
        "contactEmail": {
          "type": "string",
          "description": "Contact email for the team.",
          "format": "email"
        },
        "playerIds": {
          "type": "array",
          "description": "Array of player IDs for registered players",
          "items": {
            "type": "string"
          }
        },
        "registrationDate": {
          "type": "string",
          "description": "Date and time when the team registered.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "tournamentId",
        "teamName",
        "contactName",
        "contactEmail",
        "playerIds",
        "registrationDate"
      ]
    },
    "Announcement": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Announcement",
      "type": "object",
      "description": "Represents an announcement related to the platform or Free Fire eSports events.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Announcement entity."
        },
        "title": {
          "type": "string",
          "description": "Title of the announcement."
        },
        "content": {
          "type": "string",
          "description": "Content of the announcement."
        },
        "date": {
          "type": "string",
          "description": "Date and time when the announcement was made.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "title",
        "content",
        "date"
      ]
    },
    "Highlight": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Highlight",
      "type": "object",
      "description": "Represents an AI-generated match highlight.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Highlight entity."
        },
        "title": {
          "type": "string",
          "description": "Title of the highlight."
        },
        "description": {
          "type": "string",
          "description": "Description of the highlight."
        },
        "videoUrl": {
          "type": "string",
          "description": "URL of the highlight video.",
          "format": "uri"
        },
        "uploadDate": {
          "type": "string",
          "description": "Date and time when the highlight was uploaded.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "title",
        "description",
        "videoUrl",
        "uploadDate"
      ]
    },
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the platform.  Note that passwords are not stored in this entity.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the User entity."
        },
        "username": {
          "type": "string",
          "description": "Username of the user."
        },
        "email": {
          "type": "string",
          "description": "Email address of the user.",
          "format": "email"
        },
        "registrationIds": {
          "type": "array",
          "description": "References to Registrations. (Relationship: User 1:N Registration)",
          "items": {
            "type": "string"
          }
        },
        "role": {
          "type": "string",
          "description": "The role of the user."
        },
        "coins": {
          "type": "number",
          "description": "The number of coins the user has."
        }
      },
      "required": [
        "id",
        "username",
        "email",
        "role",
        "coins"
      ]
    },
    "CoinRequest": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "CoinRequest",
      "type": "object",
      "description": "Represents a user's request to add or withdraw coins.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the coin request."
        },
        "userId": {
          "type": "string",
          "description": "The ID of the user making the request."
        },
        "username": {
          "type": "string",
          "description": "The username of the user making the request (denormalized)."
        },
        "type": {
          "type": "string",
          "description": "The type of request.",
          "enum": [
            "add",
            "withdraw"
          ]
        },
        "amountCoins": {
          "type": "number",
          "description": "The amount of coins to add or withdraw."
        },
        "amountPaid": {
          "type": "number",
          "description": "The amount of real money paid (for 'add' requests)."
        },
        "transactionId": {
          "type": "string",
          "description": "The transaction ID from the payment provider."
        },
        "withdrawalDetails": {
            "type": "string",
            "description": "User-provided details for processing a withdrawal (e.g., UPI ID, bank account)."
        },
        "status": {
          "type": "string",
          "description": "The current status of the request.",
          "enum": [
            "pending",
            "approved",
            "denied"
          ]
        },
        "requestDate": {
          "type": "string",
          "description": "The date the request was submitted.",
          "format": "date-time"
        },
        "decisionDate": {
          "type": "string",
          "description": "The date the request was approved or denied.",
          "format": "date-time"
        }
      },
      "required": [
        "userId",
        "username",
        "type",
        "amountCoins",
        "status",
        "requestDate"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/tournaments/{tournamentId}",
        "definition": {
          "entityName": "Tournament",
          "schema": {
            "$ref": "#/backend/entities/Tournament"
          },
          "description": "Stores tournament information.  Root level collection for global access.  Includes denormalized 'members' map for authorization independence (if later required).",
          "params": [
            {
              "name": "tournamentId",
              "description": "Unique identifier for the tournament."
            }
          ]
        }
      },
      {
        "path": "/tournaments/{tournamentId}/registrations/{registrationId}",
        "definition": {
          "entityName": "Registration",
          "schema": {
            "$ref": "#/backend/entities/Registration"
          },
          "description": "Stores registration information for each tournament. Subcollection of tournaments to easily query registrations for specific tournaments. Includes denormalized data from the parent `tournament` (if required) for authorization independence. Includes denormalized 'members' map for authorization independence (if later required).",
          "params": [
            {
              "name": "tournamentId",
              "description": "Unique identifier for the tournament."
            },
            {
              "name": "registrationId",
              "description": "Unique identifier for the registration."
            }
          ]
        }
      },
      {
        "path": "/announcements/{announcementId}",
        "definition": {
          "entityName": "Announcement",
          "schema": {
            "$ref": "#/backend/entities/Announcement"
          },
          "description": "Stores global announcements related to the platform or Free Fire eSports events.  Root level collection for global access.",
          "params": [
            {
              "name": "announcementId",
              "description": "Unique identifier for the announcement."
            }
          ]
        }
      },
      {
        "path": "/highlights/{highlightId}",
        "definition": {
          "entityName": "Highlight",
          "schema": {
            "$ref": "#/backend/entities/Highlight"
          },
          "description": "Stores AI-generated match highlights. Root level collection for global access.",
          "params": [
            {
              "name": "highlightId",
              "description": "Unique identifier for the highlight."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user profiles.  Root level collection for global access.  Includes denormalized 'members' map for authorization independence (if later required).",
          "params": [
            {
              "name": "userId",
              "description": "Unique identifier for the user."
            }
          ]
        }
      },
      {
        "path": "/coinRequests/{coinRequestId}",
        "definition": {
          "entityName": "CoinRequest",
          "schema": {
            "$ref": "#/backend/entities/CoinRequest"
          },
          "description": "Stores user requests to add or withdraw coins, pending admin approval.",
          "params": [
            {
              "name": "coinRequestId",
              "description": "Unique identifier for the coin request."
            }
          ]
        }
      },
      {
        "path": "/categories/{categoryId}",
        "definition": {
          "entityName": "Category",
          "schema": {
            "$ref": "#/backend/entities/Category"
          },
          "description": "Stores game categories for tournaments.",
          "params": [
            {
              "name": "categoryId",
              "description": "Unique identifier for the category."
            }
          ]
        }
      }
    ],
    "reasoning": "Given the requirement of a Free Fire tournament hosting platform without user login initially, the Firestore structure is designed for simplicity and ease of access, with a focus on displaying tournament information and handling registrations. As the application evolves to include user accounts, the structure will be extended to include user-specific data and authorization mechanisms.\n\nTournaments are stored in a root-level `tournaments` collection. Registrations are stored in a subcollection under each tournament document (`tournaments/{tournamentId}/registrations`). This allows easy querying of registrations for a specific tournament. Announcements and Highlights are stored in root-level collections as they are globally accessible and not directly tied to user accounts or tournaments.\n\n**Authorization Independence and QAPs:**\n\n*   Since there's no initial user login system, authorization is minimal. If security rules are later needed (e.g., to restrict who can create/modify tournaments), ownership or membership models can be introduced.  For example, if certain users should be able to moderate/edit tournaments, an `editors` map could be added to the tournament document with the user ids that can edit the tournament. This map would be duplicated in each `registration` document for Authorization Independence.\n*   QAPs are supported by the segregation of data into collections based on their purpose. `List` operations are inherently secure in this setup, as there are no complex authorization rules to evaluate.\n\nAs the application evolves to include user accounts the following changes will be needed:\n\n*   Introduce a `users` collection to store user profiles and account information.\n*   Update security rules to enforce access control based on user roles and ownership.\n*   Consider using a membership map in the tournament documents to manage collaborators or administrators.\n*   Add indexing for common queries, such as retrieving tournaments by region or date."
  }
}

    